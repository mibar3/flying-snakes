{% extends 'registration/base.html' %}

{% block content %}
<!-- ***** Style Beginning ***** -->
    <style>
        *, *:before, *:after {
      box-sizing: border-box;
    }

    .plane {
      margin: 30px auto;
      max-width: 420px;
    }

    .exit {
      position: relative;
      height: 50px;
    }

    .exit:before, .exit:after {
      content: "EXIT";
      font-size: 14px;
      line-height: 18px;
      padding: 0px 2px;
      font-family: "Arial Narrow", Arial, sans-serif;
      display: block;
      position: absolute;
      background: green;
      color: white;
      top: 50%;
      transform: translate(0, -50%);
    }
    .exit:before {
      left: 0;
    }

    .exit:after {
      right: 0;
    }

    .fuselage {
      border-right: 10px solid #d8d8d8;
      border-left: 10px solid #d8d8d8;
      font-size: 20px;
      word-spacing: 10px;
    }

    .fuselage + input[type=hidden] {
      border-right: 10px solid #d8d8d8;
      border-left: 10px solid #d8d8d8;
      font-size: 20px;
      word-spacing: 20px;
    }



    ol {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .rowNumber{
      display: block;
      flex-direction: row;
      flex-wrap: nowrap;
      justify-content: flex-start;
    }

    .rowNumber label {
      display: flex;
      flex: 0 0 14.28571428571429%;
      padding: 5px;
      width:40px;
      text-indent: 10px;
      font-weight: bold;
      color:rgb(120, 120, 120);
    }

    .seats {
      display: flex;
      flex-direction: row;
      flex-wrap: nowrap;
      justify-content: flex-start;
    }

    .seat_number {
      display: flex;
      flex: 0 0 14.28571428571429%;
      padding: 5px;
      position: relative;
    }

    .seat_number input[type=checkbox] {
      position: absolute;
      opacity: 0;
    }

    /* aqui hacemos que se ponga la cruz cuando chequeas el asiento */

    .seat_number input[type=checkbox]:checked + label {
      background: #dddddd;
      text-indent: -9999px;
      overflow: hidden;
    }

     .seat_number input[type=checkbox]:checked + label:after {
      content: "X";
      text-indent: 0;
      position: absolute;
      top: 4px;
      left: 50%;
      transform: translate(-50%, 0%);
    }

/* tengo que arreglar este porque este deberia determinar que paarezca el popover pero no me funciona uwu */
    /*.seat_number input[type=checkbox]:checked label:after + div {
      position: absolute;
      display: block;
      z-index: 1;
      width: 350%;
      border: solid 1px teal;
      border-radius: 5%;
      padding: 10px;
      background: white;
      left: calc(1rem + 100%);
      bottom: 50%;
      transform: translateY(50%);
    } */


    /* esto hay que mantenerlo para que la siguiente vez el asiento checked este disabled y la siguiente
    persona no pueda clickearlo, pero checked + label y disabled + label tienen los mismos settings */

    .seat_number input[type=checkbox]:disabled + label {
      background: #dddddd;
      text-indent: -9999px;
      overflow: hidden;
    }

    .seat_number input[type=checkbox]:disabled + label:after {
      content: "X";
      text-indent: 0;
      position: absolute;
      top: 4px;
      left: 50%;
      transform: translate(-50%, 0%);
    }

    .seat_number input[type=checkbox]:disabled + label:hover {
      box-shadow: none;
      cursor: not-allowed;
    }

    .seat_number label {
      display: block;
      position: relative;
      width: 100%;
      text-align: center;
      font-size: 14px;
      font-weight: bold;
      line-height: 1.5rem;
      padding: 4px 0;
      background: #bada55;
      border-radius: 5px;
      animation-duration: 300ms;
      animation-fill-mode: both;
    }

    .seat_number label:before {
      content: "";
      position: absolute;
      width: 75%;
      height: 75%;
      top: 1px;
      left: 50%;
      transform: translate(-50%, 0%);
      background: rgba(255, 255, 255, 0.4);
      border-radius: 3px;
    }

    .seat_number label:hover {
      cursor: pointer;
      box-shadow: 0 0 0px 2px #5C6AFF;
    }

    .hide {
      display: none;
    }

    .seat_number:hover + .hide {
      display: block;
      color: red;
    }

    @-webkit-keyframes rubberBand {
      0% {
        -webkit-transform: scale3d(1, 1, 1);
        transform: scale3d(1, 1, 1);
      }
      30% {
        -webkit-transform: scale3d(1.25, 0.75, 1);
        transform: scale3d(1.25, 0.75, 1);
      }
      40% {
        -webkit-transform: scale3d(0.75, 1.25, 1);
        transform: scale3d(0.75, 1.25, 1);
      }
      50% {
        -webkit-transform: scale3d(1.15, 0.85, 1);
        transform: scale3d(1.15, 0.85, 1);
      }
      65% {
        -webkit-transform: scale3d(0.95, 1.05, 1);
        transform: scale3d(0.95, 1.05, 1);
      }
      75% {
        -webkit-transform: scale3d(1.05, 0.95, 1);
        transform: scale3d(1.05, 0.95, 1);
      }
      100% {
        -webkit-transform: scale3d(1, 1, 1);
        transform: scale3d(1, 1, 1);
      }
    }
    @keyframes rubberBand {
      0% {
        -webkit-transform: scale3d(1, 1, 1);
        transform: scale3d(1, 1, 1);
      }
      30% {
        -webkit-transform: scale3d(1.25, 0.75, 1);
        transform: scale3d(1.25, 0.75, 1);
      }
      40% {
        -webkit-transform: scale3d(0.75, 1.25, 1);
        transform: scale3d(0.75, 1.25, 1);
      }
      50% {
        -webkit-transform: scale3d(1.15, 0.85, 1);
        transform: scale3d(1.15, 0.85, 1);
      }
      65% {
        -webkit-transform: scale3d(0.95, 1.05, 1);
        transform: scale3d(0.95, 1.05, 1);
      }
      75% {
        -webkit-transform: scale3d(1.05, 0.95, 1);
        transform: scale3d(1.05, 0.95, 1);
      }
      100% {
        -webkit-transform: scale3d(1, 1, 1);
        transform: scale3d(1, 1, 1);
      }
    }
    .rubberBand {
      -webkit-animation-name: rubberBand;
      animation-name: rubberBand;
    }

    /*/* popover*/

    input+div {
      display:none;
    }
    input[type=checkbox]:hover+div {
      position: absolute;
      display: block;
      z-index: 1;
      width: 350%;
      border: solid 1px teal;
      border-radius: 5%;
      padding: 10px;
      background: white;
      left: calc(1rem + 100%);
      bottom: 50%;
      transform: translateY(50%);
     }
     */

     table, th, td {

    }

    table.center {
      margin-left: auto;
      margin-right: auto;
      font-size: 20px;

    }


    </style>
<!-- ***** Style Ending ***** -->


<form action="" method="get" class="form-horizontal form-groups-bordered" role="form">
    {%csrf_token%}
    <br class="form-group">
    <label for="your_name">Which seat would you like to reserve? </label>
    </br>
    </br>
    <div class="row">
        <div class="col-lg-8">
        <input id="your_name" type="text" name="selected_seat" class="form-control" type="CharField" data-validate="required" placeholder="Example: 4A">
    <!-- The seat number entered gets stored as a value for the key 'your_seat' in a QueryDict (subclass of dict) -->
    </div>
    <div class="col-1 col-lg-offset-8">
        <a class="btn btn-success btn-icon">
        <input type="submit" class="btn btn-success btn-icon" value= "OK" onclick="return confirm('Are you sure of your selection?')" >
        </a>
    </div>
</form>


</br>
<!-- **** Cabin Beginning **** -->

<!-- QUESTIONS:
How to tidy the list, it begins with 10?
How to add rows
How to add the row number on the side or on the middle

Must add that if the seat has been reserved it must be marked with an X -->
<div>
    </br>
</div>

<!-- si logro pasar un a count variable podria hacer usar un contador y cada vez que se llegue a count hacemos un break aka nueva row
-->

<div class="plane">
    <div class="fuselage">
        <ol class="cabin fuselage">
                {% for seat in seat_list %}
                    {%if seat.seat_number == "10A" %}
                    <!-- This part adds the row number -->
                    <input type="hidden" value="10">
                        <label for="{{seat.seat_number}}">10</label>
                    {%elif seat.seat_number == "1A" %}
                    <input type="hidden" value="1">
                        <label for="{{seat.seat_number}}">1</label>
                    {%elif seat.seat_number == "2A" %}
                    <input type="hidden" value="2">
                        <label for="{{seat.seat_number}}">2</label>
                    {%elif seat.seat_number == "3A" %}
                    <input type="hidden" value="3">
                        <label for="{{seat.seat_number}}">3</label>
                    {%elif seat.seat_number == "4A" %}
                    <input type="hidden" value="4">
                        <label for="{{seat.seat_number}}">4</label>
                    {%elif seat.seat_number == "5A" %}
                    <input type="hidden" value="5">
                        <label for="{{seat.seat_number}}">5</label>
                    {%elif seat.seat_number == "6A" %}
                    <input type="hidden" value="6">
                        <label for="{{seat.seat_number}}">6</label>
                    {%elif seat.seat_number == "7A" %}
                    <input type="hidden" value="7">
                        <label for="{{seat.seat_number}}">7</label>
                    {%elif seat.seat_number == "8A" %}
                    <input type="hidden" value="8">
                        <label for="{{seat.seat_number}}">8</label>
                    {%elif seat.seat_number == "9A" %}
                    <input type="hidden" value="9">
                        <label for="{{seat.seat_number}}">9</label>
                    {%endif%}
                    <!-- End of rows -->
                    <!-- <input type="checkbox" value="1" disabled> -->


                    <!-- This is where we decide how to display the seats -->
                    <input type="checkbox" id="{{seat.seat_number}}" name="{{seat.seat_number}}"/>
                    {% if seat.seat_number.1 == "0" %}
                        <label for="{{seat.seat_number}}">{{seat.seat_number.2}}</label>
                    {% elif seat.seat_flag == "1" %}
                        <label for="{{seat.seat_number}}">X</label>
                    {% else %}
                        <label for="{{seat.seat_number}}">{{seat.seat_number.1}}</label>
                    {%endif%}
                    {% if seat.seat_number == "10F" or seat.seat_number == "1F" or seat.seat_number == "2F" or seat.seat_number == "3F" or seat.seat_number == "4F" or seat.seat_number == "5F" or seat.seat_number == "6F" or seat.seat_number == "7F" or seat.seat_number == "8F" or seat.seat_number == "9F"%}
                        </br>
                    {%endif%}
                {% endfor %}
        </ol>
    </div>
</div>

<div>
    </br>
    </br>
     </br>
    </br>
</div>



<table class="center" style="width:20%">
  <tr>
      <th></th>
    <th></th>
    <th></th>
    <th></th>
      <th></th>
      <th></th>
      <th></th>
  </tr>
    <tr>
    <td></td>
    <td id="1A">A</td>
    <td id="1B">B</td>
    <td id="1C">C</td>
    <td id="1D">D</td>
    <td id="1F">F</td>
  </tr>
  <tr>
    <td>1</td>
    {% if seat.seat_flag == 1 and seat.seat_number == 10A %} <!-- this is just me checking the if else, this should actually check if a seat.seat_number matches the selected_seat, then his should be the new display of seats -->
        <td>X</td>
        <td>B</td>
        <td>C</td>
        <td>D</td>
        <td>F</td>
    {% else  %}
        <td>A</td>
        <td>B</td>
        <td>C</td>
        <td>D</td>
        <td>F</td>
  {% endif %}
  </tr>
  <tr>
    <td>2</td>
    <td>A</td>
    <td>B</td>
    <td>C</td>
    <td>D</td>
    <td>F</td>
  </tr>
    <tr>
    <td>3</td>
    <td>A</td>
    <td>B</td>
    <td>C</td>
    <td>D</td>
    <td>F</td>
  </tr>
    <tr>
    <td>4</td>
    <td>A</td>
        {% if seat.seat_flag == 1 and selected_seat == "4A" %}
        <td>X</td>
        {% endif %}
    <td>B</td>
    <td>C</td>
    <td>D</td>
    <td>F</td>
  </tr>
    <tr>
    <td>5</td>
    <td>A</td>
    <td>B</td>
    <td>C</td>
    <td>D</td>
    <td>F</td>
  </tr>
    <tr>
    <td>6</td>
    <td>A</td>
    <td>B</td>
    <td>C</td>
    <td>D</td>
    <td>F</td>
  </tr>
    <tr>
    <td>7</td>
    <td>A</td>
    <td>B</td>
    <td>C</td>
    <td>D</td>
    <td>F</td>
    <tr>
    <td>8</td>
    <td>A</td>
    <td>B</td>
    <td>C</td>
    <td>D</td>
    <td>F</td>
  </tr>
    <tr>
    <td>9</td>
    <td>A</td>
    <td>B</td>
    <td>C</td>
    <td>D</td>
    <td>F</td>
  </tr>
    <tr>
    <td>10</td>
    {% if seat.seat_flag == 1 %}
        <td>X</td>
    {% else %}
    <td>A</td>
    {% endif %}
    <td>B</td>
    <td>C</td>
    <td>D</td>
    <td>F</td>
  </tr>
</table>


{% endblock %}